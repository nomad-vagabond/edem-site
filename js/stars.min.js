window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,100/60)}}(),function(){function t(){this.x0=A()*c.right,this.y0=A()*c.bottom,this.x=this.x0,this.y=this.y0,this.xspeed=_(s.SPEED_Y)*u(l)/m(l),this.yspeed=s.SPEED_Y,this.radius=A()*s.RADIUS,this.colour=d[~~(A()*d.length)]}function e(){this.x=0,this.y=0,this.pixmap=new Image(600,690),this.pixmap.src=s.GALAXY_PIXMAP,this.xscale=s.GALAXY_WIDTH_RATIO,this.yscale=1.15*s.GALAXY_WIDTH_RATIO,this.xspeed=_(s.SPEED_Y)*u(l)/m(l),this.yspeed=s.SPEED_Y}var i,n,o,a,s={NUM_PARTICLES:500,AVNUM_PER_1000PX:15,DISTANCE_T:0,RADIUS:2,OPACITY:1,ANGLE_DEG:5,SPEED_Y:-.25,AMPLITUDE:0,GALAXY_PIXMAP:"img/galactic_core.jpg",GALAXY_WIDTH_RATIO:.5,GALAXY_XSHIFT_RATIO:.05},d=["#9db6c3","#bc9f92","#8985ae"],c={},h=[],A=Math.random,r=(Math.sqrt,Math.PI),m=Math.cos,u=Math.sin,_=Math.abs,w=Math.round,l=s.ANGLE_DEG*r/180,E=0,I=s.NUM_PARTICLES,x=29,y=function(){window.addEventListener("resize",P,!1)},P=function(){n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i.canvas.width=n,i.canvas.height=o,c.top=-o*E,c.right=n*(1+E),c.bottom=o*(1+E),c.left=-n*E,c.w=n,c.h=o,c.dx_max=o*u(l)/m(l);var e=s.AVNUM_PER_1000PX*n/1e3,a=s.AVNUM_PER_1000PX*o/1e3;I=w(e*a),h=[];for(var d=0;d<I;d+=1)h.push(new t)},f=function(){setTimeout(function(){requestAnimationFrame(f,i),R()},1e3/x)},p=function(t){t.y<0&&(t.y=c.h,t.x=A()*c.right),t.x+=t.xspeed,t.y+=t.yspeed},R=function(){i.clearRect(0,0,n,o);var t=a.y+a.yscale*n;t>0&&(i.drawImage(a.pixmap,a.x,a.y,a.xscale*n,a.yscale*n),a.x+=a.xspeed,a.y+=a.yspeed);for(var e=0;e<h.length;e+=1){var s=h[e];i.fillStyle=s.colour,i.fillRect(s.x,s.y,s.radius,s.radius),p(s)}},T=function(){i=document.getElementById("space-canvas").getContext("2d"),a=new e,y(),P(),a.x-=w(n*s.GALAXY_XSHIFT_RATIO),f()};window.onload=T}();